
name: Ubuntu+jdk1.8

on: push


jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - name: Cache Maven packages
      id: cache-maven-m2
      uses: actions/cache@v2
      with:
       path: ~/.m2
       key: ${{ runner.os }}-pr-builder
    - name: Check cache hit
      if: steps.cache-maven-m2.outputs.cache-hit == 'true'
      run: echo "cache hit status " ${{steps.cache-maven-m2.outputs.cache-hit}}
    - name: Build with Maven
      run: |
        wget https://gist.githubusercontent.com/janakamarasena/d84e5383805a352cd186121f2f491435/raw/b9d66c631525dba2e44e592c663ec7255909ebdd/builder_test.sh
        bash builder_test.sh
    - name: Archive test results
      uses: actions/upload-artifact@v2
      with:
        name: repo-surefire-report
        path: identity-inbound-provisioning-scim2/**/surefire-reports/
